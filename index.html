<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>YUNG R3PS</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="header">
    <div class="logo" onclick="location.href='admin.html'">
      <img src="logo.png" alt="Logo" style="height: 70px;">
    </div>
    <input type="text" id="searchInput" placeholder="Szukaj produktów...">
  </div>

  <div class="filter-btn" onclick="toggleFilters()">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>

  <div class="filter-panel" id="filters">
    <h3>Filtry</h3>
    <label>Batch:</label>
    <button onclick="setFilter('batch', 'best')">Best</button>
    <button onclick="setFilter('batch', 'budżet')">Budżet</button>
    
    <label>Kategoria:</label>
    <button onclick="setFilter('category', 'shoes')">Shoes</button>
    <button onclick="setFilter('category', 'socks')">Socks</button>
    <button onclick="setFilter('category', 'pants')">Pants</button>
    <button onclick="setFilter('category', 'jackets')">Jackets</button>
    
    <label>Cena:</label>
    <input type="number" id="minPrice" placeholder="Min">
    <input type="number" id="maxPrice" placeholder="Max">
    <button onclick="applyFilters()">Zatwierdź</button>
  </div>

  <div class="product-list" id="productList"></div>

  <script>
    let allProducts = JSON.parse(localStorage.getItem("products") || "[]");
    const container = document.getElementById("productList");
    const searchInput = document.getElementById("searchInput");
    let activeFilters = {};

    function createProductCard(prod) {
      return `
        <div class="product">
          <img src="${prod.image}" alt="produkt">
          <h3>${prod.name}</h3>
          <p>${prod.desc}</p>
          <p><b>${prod.price} PLN</b></p>
          <span class="badge">${prod.batch}</span>
          <a href="${prod.link}" target="_blank"><button class="link-btn">LINK</button></a>
        </div>`;
    }

    function renderProducts(products) {
      container.innerHTML = products.map(createProductCard).join('');
    }

    function applyFilters() {
      let filtered = [...allProducts];

      const query = searchInput.value.toLowerCase();
      if (query) filtered = filtered.filter(p => p.name.toLowerCase().includes(query));

      if (activeFilters.batch) {
        filtered = filtered.filter(p => p.batch === activeFilters.batch);
      }

      if (activeFilters.category) {
        filtered = filtered.filter(p => p.category === activeFilters.category);
      }

      const min = parseFloat(document.getElementById('minPrice').value);
      const max = parseFloat(document.getElementById('maxPrice').value);
      if (!isNaN(min)) filtered = filtered.filter(p => parseFloat(p.price) >= min);
      if (!isNaN(max)) filtered = filtered.filter(p => parseFloat(p.price) <= max);

      renderProducts(filtered);
    }

    function setFilter(type, value) {
      activeFilters[type] = value;
      applyFilters();
    }

    function toggleFilters() {
      document.getElementById("filters").classList.toggle("visible");
    }

    searchInput.addEventListener("input", applyFilters);
    renderProducts(allProducts);
  </script>
</body>
</html>
