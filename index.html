<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>YUNG R3ps</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="header">
    <img src="logo.png" class="logo-img" onclick="location.href='admin.html'" alt="Logo">
    <div class="shop-name">YUNG R3ps</div>
    <input type="text" id="searchInput" placeholder="Search products...">
  </div>

  <div class="filter-toggle" onclick="toggleFilters()">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>

  <div id="filters" class="filters hidden">
    <h3>Filter by Category</h3>
    <div class="filter-buttons">
      <button onclick="filterCategory('All')">All</button>
      <button onclick="filterCategory('Shoes')">Shoes</button>
      <button onclick="filterCategory('Socks')">Socks</button>
      <button onclick="filterCategory('Pants')">Pants</button>
      <button onclick="filterCategory('T-Shirts')">T-Shirts</button>
      <button onclick="filterCategory('Hoodies')">Hoodies</button>
      <button onclick="filterCategory('Caps')">Caps</button>
    </div>
    <div class="price-range">
      <input type="number" id="minPrice" placeholder="Min price">
      <input type="number" id="maxPrice" placeholder="Max price">
      <button onclick="applyFilters()">Apply</button>
    </div>
  </div>

  <div class="product-list" id="productList"></div>

  <script>
    const products = JSON.parse(localStorage.getItem("products") || "[]");
    const container = document.getElementById("productList");

    function renderProducts(list) {
      container.innerHTML = list.map(prod => `
        <div class="product">
          <img src="${prod.image}" alt="produkt">
          <h3>${prod.name}</h3>
          <p>${prod.desc}</p>
          <p><b>${prod.price} PLN</b></p>
          <span class="badge">${prod.batch}</span>
          <a class="link-button" href="${prod.link}" target="_blank">LINK</a>
        </div>
      `).join('');
    }

    function toggleFilters() {
      document.getElementById("filters").classList.toggle("hidden");
    }

    function filterCategory(cat) {
      if (cat === 'All') {
        renderProducts(products);
      } else {
        renderProducts(products.filter(p => p.category === cat));
      }
    }

    function applyFilters() {
      const min = parseFloat(document.getElementById("minPrice").value) || 0;
      const max = parseFloat(document.getElementById("maxPrice").value) || Infinity;
      const filtered = products.filter(p => parseFloat(p.price) >= min && parseFloat(p.price) <= max);
      renderProducts(filtered);
    }

    document.getElementById("searchInput").addEventListener("input", function () {
      const val = this.value.toLowerCase();
      renderProducts(products.filter(p => p.name.toLowerCase().includes(val) || p.desc.toLowerCase().includes(val)));
    });

    renderProducts(products);
  </script>
</body>
</html>
