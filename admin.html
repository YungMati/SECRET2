<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panel admina</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="header">
    <div class="logo" onclick="location.href='index.html'">← Wróć</div>
  </div>

  <div id="loginPanel" class="admin-panel">
    <h2>Zaloguj się</h2>
    <input type="text" id="username" placeholder="Login">
    <input type="password" id="password" placeholder="Hasło">
    <button onclick="login()">Zaloguj</button>
  </div>

  <div id="adminPanel" class="admin-panel hidden">
    <h2>Dodaj produkt</h2>
    <input id="link" placeholder="Link do aukcji (z Ali)">
    <input id="name" placeholder="Nazwa">
    <input id="desc" placeholder="Opis">
    <input id="price" placeholder="Cena (PLN)">
    <select id="batch">
      <option>best</option>
      <option>budżet</option>
    </select>
    <button onclick="addProduct()">Dodaj</button>
    <p><a href="index.html">Zobacz stronę</a></p>
  </div>

  <script>
    const loginPanel = document.getElementById("loginPanel");
    const adminPanel = document.getElementById("adminPanel");

    function login() {
      const u = document.getElementById("username").value;
      const p = document.getElementById("password").value;
      if (u === "admin" && p === "1234") {
        loginPanel.classList.add("hidden");
        adminPanel.classList.remove("hidden");
      } else {
        alert("Błędny login lub hasło");
      }
    }

    function extractImageFromAli(link) {
      const match = link.match(/https?:\/\/[^?]+\.jpg/);
      return match ? match[0] : "https://via.placeholder.com/150";
    }

    function addProduct() {
      const products = JSON.parse(localStorage.getItem("products") || "[]");
      const link = document.getElementById("link").value;
      const prod = {
        link,
        image: extractImageFromAli(link),
        name: document.getElementById("name").value,
        desc: document.getElementById("desc").value,
        price: document.getElementById("price").value,
        batch: document.getElementById("batch").value
      };
      products.push(prod);
      localStorage.setItem("products", JSON.stringify(products));
      alert("Dodano!");
    }
  </script>
</body>
</html>
